<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="UTF-8"> 
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <!-- The above 4 meta tags *must* come first in the head; any other head content must come *after* these tags -->

        <!-- Title -->
        <title>{{title}}</title>

        <!-- Favicon -->
        <link rel="icon" href="img/core-img/favicon.ico">

        <!-- Core Stylesheet -->
        <link href="../../style.css" rel="stylesheet">

        <!-- Responsive CSS -->
        <link href="../../css/responsive/responsive.css" rel="stylesheet">
        <!-- Jquery-2.2.4 js -->
        <script src="../../js/jquery/jquery-2.2.4.min.js"></script>
        <!-- Popper js -->


        <script src="../../jquery_validation.js"></script>
         <!-- mapa -->        
            <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCN4pKzD21uzA00fgxJhSW69koN9Jx7Qcs&callback=initMap"></script>
            <script src="/js/geolocalizacion.js"></script>

    </head>

    <body>
        <!-- Preloader -->
        <div id="preloader">
            <div class="caviar-load"></div>
            <div class="preload-icons">
                <img class="preload-1" src="img/core-img/preload-1.png" alt="">
                <img class="preload-2" src="img/core-img/preload-2.png" alt="">
                <img class="preload-3" src="img/core-img/preload-3.png" alt="">
            </div>
        </div>
        
        <script>
var t = jQuery.noConflict();
t().ready(function () {  

    // validate signup form on keyup and submit
    t("#dependencia").validate({
        rules: {
            nombred: {
                required: true,
                minlength: 3
            },
            descripcion: {
                required: true,
                minlength: 3
            },
            categoria: {required: true},

            telefono: {required: true},

            horario: {
                required: true

            }
        },
        messages: {
            nombred: {
                required: "Ingrese el nombre por favor"
            },
            descripcion: {
                required: "Escribe una descripcion"
            },
            categoria: {required: "Selecciona la categoria"
            },
            telefono: {
                required: "Ingresa un telefono"
            },
            horario: {
                required: "Escribe el horario de atencion"
            }
        }
    });

});

        </script>
        <!-- ***** Header Area Start ***** -->
        <header class="header_area" id="header" style="background: #040505">
            <div class="container h-100">
                <div class="row h-100">
                    <div class="col-12 h-100">
                        <nav class="h-100 navbar navbar-expand-lg align-items-center"> 
                            <a class="navbar-brand" href="">GeoLoja</a>
                            <div class="collapse navbar-collapse" id="caviarNav">
                                <ul class="navbar-nav ml-auto" id="caviarMenu">                                    
                                    <li class="nav-item dropdown">
                                        <a class="nav-link " href="/ver/categoria">Categorias</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" href="/ver/dependencia">Dependencias</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" href="/ver/galeria">Galeria</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" href="/reportes">Reportes</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" href="/cerrar_sesion">Cerrar sesion</a>
                                    </li>
                                </ul>
                                <!-- Search Btn -->

                            </div>
                        </nav>
                    </div>
                </div>
            </div>
        </header>
        <!-- ***** Header Area End ***** -->
                   
        <!-- ****** Reservation Area End ****** -->
        <section class="caviar-testimonials-area" id="testimonial">
            <div class="container">
                <div class="row">

                </div>
            </div>
        </section>
        <!-- ****** dependencias ****** -->
        <section class="caviar-reservation-area d-md-flex">
            <div class="reservation-form-area d-flex justify-content-end">
                <div class="reservation-form">
                    <div class="section-heading">
                        <h2>Agregar dependencia</h2>
                    </div>
                    <form action="/guardar/dependencia" method="POST" id="dependencia">
                        <input type="hidden" name="external1" value="0" id="external1"/>
                        <div class="row">

                            <div class="col-12 col-lg-12">
                                <select class="col-lg-12 btn" style="background: #edeff2" name="categoria" id="categoria">
                                    {{#each this.categoria as |item|}}
                                    <option value="{{ item.id }}" > {{item.nombre}}</option>
                                    {{/each}}
                                </select>

                            </div>

                            <div class="col-12 col-lg-12">
                                <input id="nombred" type="text" class="form-control" placeholder="Nombre" name="nombreDependencia">

                            </div>
                            <div class="col-12 col-lg-12">
                                <textarea  placeholder="Descripcion" class="form-control" name="descripcion" id="descripcion" cols="30" rows="10"></textarea>

                            </div>
                            <div class="col-12 col-lg-12">
                                <input type="text" class="form-control" placeholder="Telefono" name="telefono" id="telefono">
                            </div>
                            <div class="col-12 col-lg-12">
                                <input type="text" class="form-control" placeholder="Horarios de atencion" name="horario" id="horario">
                            </div>
                            <div class="col-12 col-lg-12">
                                <input type="text" class="form-control" placeholder="Longitud" name="longitud" id="txt_long" readonly>
                            </div>
                            <div class="col-12 col-lg-12">
                                <input type="text" class="form-control" placeholder="Latitud" name="latitud" id="txt_lat" readonly>
                            </div>
                            <div id="map" style="width: 500px; height: 400px;">                                
                            </div>                             <div class="col-12 "><br>
                                <button type="submit" class="btn caviar-btn"><span></span>Agregar dependencia</button>
                            </div>    
                        </div>
                    </form>
                </div>
            </div>
        </section>
        <!-- ****** Reservation Area End ****** -->
        
        
        <section class="caviar-testimonials-area" id="testimonial">
            <div class="container">
                <div class="row">

                </div>
            </div>
        </section>
        
        
        <section >
            <div class="container">
                <div class="row">
                    <div >
                        <div class="section-heading">
                            <h2>Lista de dependencias</h2>
                        </div>
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>Nro</th><th>Categoria</th><th>Nombre</th><th>Descripcion</th><th>Telefono</th><th>Horario Atencion</th><th>Accion</th>
                                </tr>
                            </thead>
                            <tbody>  
                                {{#each this.listaD as |itenes a|}}
                                <tr>
                                    <td>{{ a }}</td>
                                    <td>{{itenes.categorium.nombre}}</td>
                                    <td>{{ itenes.nombre }}</td>
                                    <td>{{ itenes.descripcion }}</td>                                   
                                    <td>{{ itenes.telefono }}</td>
                                    <td>{{ itenes.horarioAtencion }}</td>
                                    <td>
                                        <button  id="{{ a }}" class="btn btn-primary" >Editar </button>  
                                    </td>
                            <script>

                                t("#{{ a }}").click(function () {
                                    t("#categoria").val("{{ itenes.categorium.id}}");
                                    t("#nombred").val("{{ itenes.nombre }}");
                                    t("#descripcion").val("{{ itenes.descripcion }}");
                                    t("#telefono").val("{{ itenes.telefono }}");
                                    t("#horario").val("{{ itenes.horarioAtencion }}");
                                    t("#external1").val("{{ itenes.external_id }}");
                                    window.scrollTo(0, 1);
                                });

                            </script>
                            </tr>                    
                            {{/each }}
                            </tbody>
                        </table>
                    </div>
           

                    

                </div>
            </div>
        </section>

        <!-- ****** Footer Area Start ****** -->
        <footer class="caviar-footer-area">
            <div class="container">
                <div class="row">
                    <div class="col-12">
                        <div class="footer-text">
                            <a href="#" class="navbar-brand">Geolocalizacion Loja</a>
                            <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
                            <p>Copyright &copy;<script>document.write(new Date().getFullYear());</script> All rights reserved | This template is made with  by <a href="https://colorlib.com" target="_blank">Colorlib</a></p>
                            <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
                        </div>
                    </div>
                </div>
            </div>
        </footer>
        <!-- ****** Footer Area End ****** -->

        <script src="../../js/bootstrap/popper.min.js"></script>
        <!-- Bootstrap-4 js -->
        <script src="../../js/bootstrap/bootstrap.min.js"></script>
        <!-- All Plugins js -->
        <script src="../../js/others/plugins.js"></script>
        <!-- Active JS -->
        <script src="../../js/active.js"></script>
    </body>
</html>
